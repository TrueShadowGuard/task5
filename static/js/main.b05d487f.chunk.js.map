{"version":3,"sources":["pages/Login.js","components/Table/Table.js","components/ActionPanel.js","pages/Main.js","routes.js","App.js","index.js"],"names":["Login","props","ref","React","createRef","history","useHistory","className","onSubmit","e","preventDefault","type","id","aria-describedby","placeholder","onClick","onLogin","setAuthorization","onRegister","form","a","console","log","email","current","querySelector","value","password","fetch","method","headers","body","JSON","stringify","username","result","json","responce","token","localStorage","setItem","push","parentNode","Table","data","scope","map","x","_id","banned","onChange","selected","target","checked","ActionPanel","sendRequest","size","setRows","getItem","action","res","message","rows","guestRoutes","path","component","authRoutes","useState","getData","App","authorization","route","exact","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b05d487f.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Redirect, useHistory} from \"react-router-dom\";\r\n\r\nconst Login = props => {\r\n    const ref = React.createRef();\r\n    const history = useHistory();\r\n    return (\r\n        <form className=\"container mt-5\" onSubmit={e=>e.preventDefault()} ref={ref}>\r\n            <div className=\"form-group\">\r\n\r\n                <input type=\"username\" className=\"form-control\" id=\"email\" aria-describedby=\"emailHelp\"\r\n                       placeholder=\"Enter username\" />\r\n            </div>\r\n            <div className=\"form-group\">\r\n\r\n                <input type=\"password\" className=\"form-control\" id=\"password\" placeholder=\"Password\" />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-dark\" onClick={() => onLogin(ref,props.setAuthorization,history)}>Submit</button>\r\n            <button type=\"submit\" className=\"btn btn-dark ml-1\" onClick={() => onRegister(ref,props.setAuthorization)}>Register</button>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n\r\nasync function onLogin(form,setAuthorization,history) {\r\n    console.log('log')\r\n    let email = form.current.querySelector('#email').value;\r\n    let password = form.current.querySelector('#password').value;\r\n    try {\r\n        let result = await fetch('/login', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({username: email, password})\r\n        });\r\n        let responce = await result.json();\r\n        setAuthorization(responce.token);\r\n        localStorage.setItem('authorization',responce.token);\r\n        history.push('/');\r\n    } catch(e) {}\r\n}\r\n\r\nasync function onRegister(form,setAuthorization) {\r\n    try {\r\n        console.log('reg')\r\n        let email = form.current.parentNode.querySelector('#email').value;\r\n        let password = form.current.parentNode.querySelector('#password').value;\r\n        console.log(email, password)\r\n        let result = await fetch('/register', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({username: email, password})\r\n        });\r\n        let responce = await result.json();\r\n        setAuthorization(responce.token);\r\n        localStorage.setItem('authorization',responce.token);\r\n\r\n    } catch(e) {\r\n\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nconst Table = data => {\r\n    return (\r\n        <div>\r\n            <table className=\"table table-hover table-sm table-bordered\">\r\n                <thead className=\"thead-dark\">\r\n                <tr>\r\n                    <th scope=\"col\">#</th>\r\n                    <th scope=\"col\">name</th>\r\n                    <th scope=\"col\">banned</th>\r\n                    <th scope=\"col\">select</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {data.data.map(x => (\r\n                    <tr>\r\n                        <td>{x._id}</td>\r\n                        <td>{x.username}</td>\r\n                        <td>{''+x.banned}</td>\r\n                        <td><input type=\"checkbox\" onChange={e => {\r\n                            x.selected = e.target.checked;\r\n                            console.log(x)\r\n                        }}/></td>\r\n                    </tr>\r\n                ))}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Table;\r\n","import React from 'react';\r\nimport {BsFillTrashFill} from 'react-icons/bs';\r\nimport axios from \"axios\";\r\n\r\nconst ActionPanel = data => {\r\n    return (\r\n        <div className=\"m-1\">\r\n            <button type=\"button\" className=\"btn btn-dark\" onClick={() => sendRequest('block',data)}>block selected</button>\r\n            <button type=\"button\" className=\"btn btn-light\" onClick={() => sendRequest('unblock',data)}>unblock selected</button>\r\n            <BsFillTrashFill size=\"1.5rem\" onClick={() => sendRequest('delete',data)}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ActionPanel;\r\n\r\nasync function sendRequest(type, {data, setRows}) {\r\n    try {\r\n        console.log('DATA TO SEND', data)\r\n        let result = await fetch('http://localhost:3001/getData', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': localStorage.getItem('authorization'),\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify({action: type, data})\r\n        });\r\n        let res = await result.json();\r\n        console.log(res)\r\n        setRows(res)\r\n    } catch(e) {\r\n        console.log(e.message);\r\n    }\r\n}\r\n","import React from 'react';\r\nimport {useState} from 'react';\r\nimport Table from '../components/Table/Table';\r\nimport ActionPanel from \"../components/ActionPanel.js\";\r\n\r\n\r\n// const data = [\r\n//     {name: 'Jack', id: 1, status: 'banned', key: '1'},\r\n//     {name: 'Jack', id: 2, status: 'banned', key: '2'},\r\n//     {name: 'Jack', id: 3, status: 'banned', key: '3'},\r\n//     {name: 'Jack', id: 4, status: 'banned', key: '4'},\r\n// ];\r\nconst data = [];\r\n\r\nconst Main = props => {\r\n    const [rows, setRows] = useState(data);\r\n    getData(rows, setRows)\r\n    return (\r\n        <div>\r\n            <ActionPanel data={rows} setRows={setRows} />\r\n            <Table data={rows}/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Main;\r\n\r\nasync function getData(rows, setRows) {\r\n    let result = await fetch('/getData', {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': localStorage.getItem('authorization')\r\n        }\r\n    });\r\n    let res = await result.json();\r\n    console.log(res)\r\n    if(JSON.stringify(rows) === JSON.stringify(res)) return;\r\n    console.log(res)\r\n    setRows(res);\r\n}\r\n","import Login from \"./pages/Login\";\r\nimport Main from \"./pages/Main\";\r\n\r\n\r\nexport const guestRoutes = [\r\n    {path: '/login',component: Login}\r\n];\r\n\r\nexport const authRoutes = [\r\n    {path: '/',component: Main}\r\n];\r\n\r\n","import './App.css';\nimport React from 'react';\nimport { useState } from 'react';\nimport {BrowserRouter, Route, Switch, Redirect} from \"react-router-dom\";\nimport {authRoutes, guestRoutes} from './routes.js';\n\nfunction App() {\n  const [authorization,setAuthorization] = useState(localStorage.getItem('authorization'));\n  console.log(authorization)\n  return (\n    <BrowserRouter>\n      <Switch>\n          {authorization && authRoutes.map(route => <Route exact path={route.path} component={() => route.component({setAuthorization})}/>)}\n          {guestRoutes.map(route => <Route exact path={route.path} component={() => route.component({setAuthorization})}/>)}\n          <Redirect to=\"/login\" />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}